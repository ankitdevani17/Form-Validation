<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Form Validator</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;600&display=swap" rel="stylesheet">

</head>
<body>
  <div class="container">
  <div class="header">
    <h2>Registration Form</h2>
  </div>
  <form class="form" action="index.html" method="post">
    <div class="form-control">
        <label for="">Username</label>
        <input type="text" name="" value="" id="username" placeholder="Full Name" autocomplete="off">
        <i class="fas fa-check-circle"></i>
        <i class="fas fa-exclamation-circle"></i>
        <small>Error!</small>
    </div>

    <div class="form-control">
        <label for="">Email id</label>
        <input type="email" name="" value="" id="email" placeholder="Email id" autocomplete="off">
        <i class="fas fa-check-circle"></i>
        <i class="fas fa-exclamation-circle"></i>
        <small>Error!</small>
    </div>
    <div class="form-control">
        <label for="">Mobile Number</label>
        <input type="number" name="" value="" id="phone" placeholder="Mobile Number" autocomplete="off">
        <i class="fas fa-check-circle"></i>
        <i class="fas fa-exclamation-circle"></i>
        <small>Error!</small>
    </div>
    <div class="form-control">
        <label for="">Password</label>
        <input type="password" name="" value="" id="password" placeholder="Enter Password" autocomplete="off">
        <i class="fas fa-check-circle"></i>
        <i class="fas fa-exclamation-circle"></i>
        <small>Error!</small>
    </div>
    <div class="form-control">
        <label for="">Confirm Password</label>
        <input type="password" name="" value="" id="cpassword" placeholder="Enter Password Again" autocomplete="off">
        <i class="fas fa-check-circle"></i>
        <i class="fas fa-exclamation-circle"></i>
        <small>Error!</small>
    </div>
    <input type="submit" class="button"> </input>
  </form>
  </div>
<script type="text/javascript" >
  const form = document.getElementById('form')
  const username = document.getElementById('username')
  const email = document.getElementById('email')
  const phone = document.getElementById('phone')
  const password = document.getElementById('password')
  const cpassword = document.getElementById('cpassword')
    window.onload=function(){
    form.addEventListener('submit', (event));
    event.preventDefault();
    validate();
  }

  const isemail = (emailval) =>{
    var at=emailval.IndexOf("@")
    if(at<1){
      return false;
    }
    var dot = emailval.lastIndexOf(".")
    if(dot <=at+2){
      return false;
    }
    else if(dot === emailval.length - 1){
      return false;
    }
    return true;
  }

  const validate = () => {
    const usernameval =username.value.trim();
    const emailval = email.value.trim();
    const phoneval = phone.value.trim();
    const passwordval = password.value.trim();
    const cpasswordval =cpassword.value.trim();

    if(usernameval === ""){
      setErrormsg(username, "Username cannnot be blank")
    }
    else if(usernameval.length<=2){
        setErrormsg(username, "Username should be of minimum 3 characters")
    }
    else{
      setSuccessmsg(username);
    }
    if(emailval === ""){
      setErrormsg(email, "Username cannnot be blank")
    }
    else if(!isemail(emailval)){
        setErrormsg(email, "Not a valid email")
    }
    else{
      setSuccessmsg(email);
    }
    function setErrormsg (input,errormsg){
      const formcontrol = input.parentElement;
      const small = formcontrol.querySelector('small');
      formcontrol.className = "form-control error";
      small.innerText = errormsg;
    }
  }
  </script>
</body>
</html>
